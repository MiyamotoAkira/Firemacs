* Introduction
This document is a port of chrome/content/config.xul
* Overall
#+BEGIN_SRC html :noweb tangle :tangle config.html
  <!DOCTYPE html>
  <html>

    <<config-head>>

    <<config-body>>
  
  </html>
#+END_SRC
* TODO Head
** Master Head
#+NAME: config-head
#+BEGIN_SRC html :noweb tangle
  <head>
    <title>Firemacs configuration</title>
    <link rel="stylesheet" href="config.css">
    <<head-commented-out>>
    <script src="config.js"></script>
    <script src="config-name.js"></script>
  </head>
#+END_SRC
** Commented out
This code was commented out but could be required. It appears to be related to submitting to the store or some other security or administrative mechanism.
#+NAME: head-commented-out
#+BEGIN_SRC html
  <!--<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
  <xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" onload="FmxConfig.onload();">-->
#+END_SRC
** TODO move config.js and config-name.js to options_pages/
** TODO what is FmxConfig.onload()?
** TODO check stylesheets
** TODO repath /skin/config.css to something that makes sense
** TODO verify stylesheets
** TODO move skin/config.css
* Body
** Master
The overall layout follows Kazu's original design.
#+NAME: config-body
#+BEGIN_SRC html :noweb tangle
      <body>
        <form id="main">

         <<main-glue>>

          <<tab-about>>
  <!--  
          <<tab-option>>

          <<tab-view>>

          <<tab-edit>>

          <<tab-common>>
  -->
          <<tab-menu>>

          <<main-footer>>


        </form> 
      </body>
#+END_SRC

** TODO Main glue
See this [[https://www.w3schools.com/howto/howto_js_tabs.asp][example]] for creating tabs in Javascript CSS html
#+NAME: main-glue
#+BEGIN_SRC html
  <div class="tab">
    <button class="tablinks" onclick="openTab(e,'about')">About</button>
    <button class="tablinks" onclick="openTab(e, 'option' )">Option</button>
    <button class="tablinks" onclick="openTab(e,'view' )">View</button>
    <button class="tablinks" onclick="openTab(e, 'edit')">Edit</button>
    <button class="tablinks" onclick="openTab(e, 'common')">Common</button>
    <button class="tablinks" onclick="openTab(e, 'menu')"> Menu</button>
  </div>
#+END_SRC
*** TODO generate main-glue-js
#+NAME: main-glue-js
#+BEGIN_SRC javascript 
  function openTab(event, tabName) {
      var i, tabcontent, tablinks;
      //get all elements with class="tabcontent" and hide them
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i=0; i<tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
      };
      // Get all elements with class="tablinks" and remoeve the
      // class "active
      tablinks = document.getElementsByClassName("tablinks");
      for (i=0; i<tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace("active", "");
      }

      //Show the current tab and add an "active" class to the button
      //that opened the tab
      document.getElementById(tabName).style.display = "block";
      event.currentTarget.className += " active";
  }
#+END_SRC
** TODO tab-about
#+NAME: tab-about
#+BEGIN_SRC html
    <div id="about" class="tabcontent">
      <p>Firemacs was written by Kazu Yamamoto. Support was moved to <a href="https://github.com/firemacs">Github</a> in order to transition Firemacs to a WebExtension.</p>
      <!--    
              <p>The original home page is: http://www.mew.org/~kazu/proj/firemacs/</p> 
      -->
      <p />
      <p>'M-' is 'C-['.</p>
      <p>'ESC' or 'Alt' or 'Meta' can be used as 'M-' if checked in Option tab.</p>
      <p />
      <p>Unix: Alt is Alt, Meta is Meta.</p>
      <p>Mac: Alt is Option, Meta is Apple. Option inserts an accent letter, so cannot be used.</p>
      <p>Windows: Alt is Alt, Meta is Windows. To use Alt, set ui.key.menuAccessKey to 0.</p>
      <p />
      <p>Remove key symbols from forms to disable their key bindings.</p>
      <p>Arrow keys are specified with 'up', 'down', 'right', and 'left'.</p>
      <p>'C-M-' should be specified instead of 'M-C-'.</p>
    </div>
#+END_SRC
** TODO tab-option 
#+NAME: tab-option
#+BEGIN_SRC html
<div id="option" class="tabcontent">
      <tabpanel equalsize="always">
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <checkbox id="UseEscape" checked="true" />
              <description value="use ESC as 'M-'" />
            </row>
            <row>
              <checkbox id="UseAlt" checked="true" />
              <description value="use Alt as 'M-'" />
            </row>
            <row>
              <checkbox id="UseMeta" checked="false" />
              <description value="use Meta as 'M-'" />
            </row>
            <row>
              <textbox id="XPrefix" value="C-x" />
              <description value="is the prefix key" />
            </row>
            <row>
              <textbox id="AccessRegex" value="wiki" />
              <description value="URL regex to disable access keys" />
            </row>
            <row>
              <textbox id="TurnoffRegex" value="" />
              <description value="URL regex to turn off Firemacs" />
            </row>
            <row>
              <checkbox id="WalkForm" checked="true" />
              <description value="allow to walk through forms" />
            </row>
            <row>
              <checkbox id="EditOnly" checked="false" />
              <description value="edit area only" />
            </row>
          </rows>
        </grid>
      </tabpanel>
</div>
#+END_SRC
** TODO tab-view
#+NAME:tab-view
#+BEGIN_SRC html
<div id="view" class="tabcontent">
      <tabpanel equalsize="always">
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="ScrollLineUp" value="C-p" />
              <description value="scrolls a line up" />
            </row>
            <row>
              <textbox id="ScrollLineDown" value="C-n" />
              <description value="scrolls a line down" />
            </row>
            <row>
              <textbox id="PreviousTab" value="C-b" />
              <description value="moves to the previous tab" />
            </row>
            <row>
              <textbox id="NextTab" value="C-f" />
              <description value="moves to the next tab" />
            </row>
            <row>
              <textbox id="ViScrollLineUp" value="k" />
              <description value="scrolls a line up" />
            </row>
            <row>
              <textbox id="ViScrollLineDown" value="j" />
              <description value="scrolls a line down" />
            </row>
            <row>
              <textbox id="ViScrollLeft" value="H" />
              <description value="scrolls left" />
            </row>
            <row>
              <textbox id="ViScrollRight" value="L" />
              <description value="scrolls right" />
            </row>
            <row>
              <textbox id="ViPreviousTab" value="h" />
              <description value="moves to the previous tab" />
            </row>
            <row>
              <textbox id="ViNextTab" value="l" />
              <description value="moves to the next tab" />
            </row>
            <row>
              <textbox id="ViScrollPageUp" value="b" />
              <description value="scrolls a page up" />
            </row>
            <row>
              <textbox id="ViScrollPageDown" value="u" />
              <description value="scrolls a page down" />
            </row>
            <row>
              <textbox id="PreviousPage" value="B" />
              <description value="moves to the previous page" />
            </row>
          </rows>
        </grid>
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="NextPage" value="F" />
              <description value="moves to the next page" />
            </row>
            <row>
              <textbox id="ReloadPage" value="R" />
              <description value="reloads the page" />
            </row>
            <row>
              <textbox id="ViScrollTop" value="&lt;" />
              <description value="scrolls to the top" />
            </row>
            <row>
              <textbox id="ViScrollBottom" value="&gt;" />
              <description value="scrolls to the bottom" />
            </row>
            <row>
              <textbox id="ScrollTop" value="M-&lt;" />
              <description value="scrolls to the top" />
            </row>
            <row>
              <textbox id="ScrollBottom" value="M-&gt;" />
              <description value="scrolls to the bottom" />
            </row>
          </rows>
        </grid>
      </tabpanel>
</div>
#+END_SRC
** TODO tab-edit
#+NAME: tab-edit
#+BEGIN_SRC html
 <div id="edit" class="tabcontent">
     <tabpanel equalsize="always">
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="PreviousLine" value="C-p" />
              <description value="moves to the previous line/input" />
            </row>
            <row>
              <textbox id="NextLine" value="C-n" />
              <description value="moves to the next line/input" />
            </row>
            <row>
              <textbox id="PreviousChar" value="C-b" />
              <description value="moves to the previous char" />
            </row>
            <row>
              <textbox id="NextChar" value="C-f" />
              <description value="moves to the next char" />
            </row>
            <row>
              <textbox id="ArrowPreviousLine" value="up" />
              <description value="moves to the previous line/input" />
            </row>
            <row>
              <textbox id="ArrowNextLine" value="down" />
              <description value="moves to the next line/input" />
            </row>
            <row>
              <textbox id="ArrowPreviousChar" value="left" />
              <description value="moves to the previous char" />
            </row>
            <row>
              <textbox id="ArrowNextChar" value="right" />
              <description value="moves to the next char" />
            </row>
            <row>
              <textbox id="BeggingOfLine" value="C-a" />
              <description value="moves to the beg of the line" />
            </row>
            <row>
              <textbox id="EndOfLine" value="C-e" />
              <description value="moves to the end of the line" />
            </row>
            <row>
              <textbox id="SetMark" value="C-SPC" />
              <description value="puts the mark" />
            </row>
            <row>
              <textbox id="SetMarkAlias" value="C-i" />
              <description value="puts the mark" />
            </row>
            <row>
              <textbox id="KillRegion" value="C-w" />
              <description value="kills the region" />
            </row>
          </rows>
        </grid>
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="KillLineForward" value="C-k" />
              <description value="kills the line forward" />
            </row>
            <row>
              <textbox id="KillLineBackward" value="C-u" />
              <description value="kills the line backward" />
            </row>
            <row>
              <textbox id="Paste" value="C-y" />
              <description value="pastes the copy buf" />
            </row>
            <row>
              <textbox id="DeleteCharForward" value="C-d" />
              <description value="deletes the next char" />
            </row>
            <row>
              <textbox id="DeleteCharBackward" value="C-h" />
              <description value="deletes the previous char" />
            </row>
            <row>
              <textbox id="Undo" value="C-xu" />
              <description value="executes undo" />
            </row>
            <row>
              <textbox id="OpenLine" value="C-o" />
              <description value="open one line" />
            </row>
            <row>
              <textbox id="NextWord" value="M-f" />
              <description value="moves to the next word" />
            </row>
            <row>
              <textbox id="PreviousWord" value="M-b" />
              <description value="moves to the previous word" />
            </row>
            <row>
              <textbox id="DeleteWordForward" value="M-d" />
              <description value="deletes a word forward" />
            </row>
            <row>
              <textbox id="DeleteWordBackward" value="M-DEL" />
              <description value="deletes a word backward" />
            </row>
            <row>
              <textbox id="MoveTop" value="M-&lt;" />
              <description value="moves to the top" />
            </row>
            <row>
              <textbox id="MoveBottom" value="M-&gt;" />
              <description value="moves to the bottom" />
            </row>
          </rows>
        </grid>
      </tabpanel>
</div>
#+END_SRC
** TODO tab-common
#+NAME: tab-common
#+BEGIN_SRC html
<div id="common" class="tabcontent">
     <tabpanel equalsize="always">
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="AllTabs" value="C-xb" />
              <description value="tabs overview with filter" />
            </row>
            <row>
              <textbox id="SearchForward" value="C-s" />
              <description value="searches forward" />
            </row>
            <row>
              <textbox id="SearchBackword" value="C-r" />
              <description value="searches backward" />
            </row>
            <row>
              <textbox id="ScrollPageUp" value="M-v" />
              <description value="scrolls a page up" />
            </row>
            <row>
              <textbox id="ScrollPageDown" value="C-v" />
              <description value="scrolls a page down" />
            </row>
            <row>
              <textbox id="ResetMark" value="C-g" />
              <description value="resets the mark" />
            </row>
            <row>
              <textbox id="JumpURLBar" value="C-xl" />
              <description value="moves to the URL bar" />
            </row>
            <row>
              <textbox id="JumpSearchBar" value="C-xg" />
              <description value="moves to the search bar" />
            </row>
            <row>
              <textbox id="FocusBody" value="C-x." />
              <description value="moves to the body" />
            </row>
            <row>
              <textbox id="JumpInput" value="C-xt" />
              <description value="moves to the first input" />
            </row>
            <row>
              <textbox id="JumpSubmit" value="C-xs" />
              <description value="moves to the first button" />
            </row>
            <row>
              <textbox id="CmPreviousTab" value="C-M-b" />
              <description value="moves to the previous tab" />
            </row>
            <row>
              <textbox id="CmNextTab" value="C-M-f" />
              <description value="moves to the next tab" />
            </row>
          </rows>
        </grid>
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="CloseTab" value="C-xk" />
              <description value="closes the tab" />
            </row>
            <row>
              <textbox id="OpenFile" value="C-xC-f" />
              <description value="opens a file" />
            </row>
            <row>
              <textbox id="Copy" value="M-w" />
              <description value="copies the region" />
            </row>
            <row>
              <textbox id="NextButton" value="M-n" />
              <description value="moves to the next button" />
            </row>
            <row>
              <textbox id="PreviousButton" value="M-p" />
              <description value="moves to the previous button" />
            </row>
            <row>
              <textbox id="KillAccessKeys" value="M-k" />
              <description value="disables access keys" />
            </row>
            <row>
              <textbox id="NewLine" value="C-m" />
              <description value="generates return key code" />
            </row>
            <row>
              <textbox id="CopyUrl" value="C-M-u" />
              <description value="copy url" />
            </row>
            <row>
              <textbox id="CopyTitle" value="C-M-t" />
              <description value="copy title" />
            </row>
            <row>
              <textbox id="CopyTitleAndUrl" value="C-M-b" />
              <description value="copy title and url" />
            </row>
            <row>
              <textbox id="WebSearch" value="C-xC-e" />
              <description value="web search" />
            </row>
            <row>
              <textbox id="MapSearch" value="C-xC-a" />
              <description value="map search" />
            </row>
            <row>
              <textbox id="SavePage" value="C-xC-s" />
              <description value="save page" />
            </row>
          </rows>
        </grid>
        <grid flex="1">
          <columns>
            <column />
            <column />
          </columns>
          <rows>
            <row>
              <textbox id="SelectAll" value="C-xh" />
              <description value="selects all" />
            </row>
          </rows>
        </grid>
      </tabpanel>
</div>
#+END_SRC
** TODO tab-menu
#+NAME: tab-menu
#+BEGIN_SRC html
  <div id="menu" class="tabcontent">
    <p>
      <input class="configvalue" id="PreviousCompletion" value="C-p" />
      <label>moves to the previous line</label>
    </p>
    <p>
      <input class="configvalue" id="NextCompletion" value="C-n" />
      <label>moves to the next line</label>
    </p>
  </div>
#+END_SRC
** TODO main-footer
#+NAME: main-footer
#+BEGIN_SRC html
  <div id="footer">
    <hr/>
    <button oncommand="window.close();"/>Close</button>
    <button oncommand="FmxConfig.save(); window.close();">Save</button>
  </div>
#+END_SRC
*** TODO change oncommand to onClick
Not done to keep from accidentally closing while working elsewhere.
*** TODO Figure out FmxConfig.save() function

